<html>
<head>
  <script type="text/javascript" src="jquery.js">
  //from: http://code.google.com/apis/libraries/devguide.html#jquery
  //min: https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js
  </script>
  <script type="text/javascript" src="ICanHaz.js">
    //from: https://github.com/andyet/ICanHaz.js/
    //min: https://github.com/andyet/ICanHaz.js/raw/master/ICanHaz.min.js
  </script>
  <!--
  //These will most likely be quite helpful in querying the api
  <script type="text/javascript" src="underscore.js">
    //from: http://documentcloud.github.com/underscore/
  </script>
  <script type="text/javascript" src="backbone.js">
  //from: http://documentcloud.github.com/backbone/
  //min: http://documentcloud.github.com/backbone/backbone-min.js
  </script>
  -->
  <script id="meetupEventView" type="text/html">
  <div class="meetup">
    <div class="descript">
      <h2>{{name}}</h2>
      {{{description}}}
    </div>
    <div class="date_time">
      <h3>{{day}}</h3>
      <h4>{{hour}}</h4>
      <h5>{{rsvps}} rsvp</h5>
    </div>
  </div>
  </script>
  <script id="ExampleBackend-abstractMe" type="text/javascript">
    function parseMeetup(data){
      var meetupData= {
       rsvpcount: data["rsvpcount"],
       hour: function(){ return data["time"].split(" ")[3].split(":")[0] - 12; },
       minute: function(){ return data["time"].split(" ")[3].split(":")[1];},
       day: function(){ return data["time"].split(" ").slice(0,3).join(" "); },
       description: data["description"], // Use {{{}}} because this has inline html
       name: data["name"]
      };
      return meetupData;
    };
    
    function render(){
      var meetupContainer = $("#lc");
      var meetupViews = $.map(Meetup.collection["results"], function(apiEventData){
        return meetupContainer.append(ich.meetupEventView(parseMeetup(apiEventData)));
      });
      //return meetupViews;
    };
    
  </script>
  <script id="test-interface" type="text/javascript">
    var Meetup = {};
    Meetup.onCollect = function(meetupFeed){
      $(document).ready(function(){ //Woo hoops to jump through.
           Meetup.collection = meetupFeed;
            render();
          });
    };
  </script>
  <script type="text/javascript" src="meetup.json">
  //I don't expect we'll need to do this kind of jsonp-style include in production, but for local testing, you can't do "file://" ajax requests.
  //So this include, and the previous call-point are the main differences in the test files vs the main files.
  </script>
</head>
<body>
  <div class="head">
  <h1 id="logo"><a href="test.html">BmoreJS.info</a></h1>
  </div>
  <div id="content">
    <div id="lc">
      <div class="meetup">
        <div class="descript">
          <h2>Practical CouchDB with Mark Headd</h2>
          <p>CouchDB is a great little NoSQL document store. Like many other NoSQL solutions, it uses Javascript for it's map-reduce / view code. Couch takes thing further by allowing you to create full blown applications directly in the database -- written in Javascript of course. It also integrates with nodejs quite nicely.</p>
        </div>
        <div class="date_time">
          <h3>5/24</h3>
          <h4>7:00p</h4>
          <h5>24 rsvp</h5>
        </div>
      </div>
    </div><!-- end lc -->
  </div>
</body>
</html>
